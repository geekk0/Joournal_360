{% extends 'base.html' %}
{% load static %}


{% block title %}

    <title>Результаты поиска:</title>

{% endblock %}



{% block content %}

<script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <script type="text/javascript">


    let input_text = '{{ input_text }}'

    $(document).ready(function(){
    Highlight();

    });

    function Highlight() {



        window.find(input_text);

}

    </script>


        <div class="header">

            <div class="add_note">
                {% if role == 'Техдирекция' %}

                    <a class="authorization" href="{% url 'добавить заметку инженеров' %}">
                                <img src="{% static 'images/plus_circle_black.png'%}" title="Начать запись"
                                     style=""></a>

                {% endif %}

                {% if role == 'Режиссеры' %}

                    <a class="authorization" href="{% url 'добавить заметку режиссеров' %}">
                                <img src="{% static 'images/plus_circle_black.png'%}" title="Начать запись"
                                     style=""></a>

                {% endif %}

            </div>

            <div class="label">
                <a style="color:black;font-size:18pt" href="/">Журнал 360</a>

            </div>

            <div class="logout">
                    {% if request.user.is_authenticated %}

                        <p>{{ current_user }}                 {{ role }}</p>

                        <a style="" class="authorization" href="{% url 'logout' %}"><img src="{% static 'images/quit.png'%}" title="Выйти"
                        style=""></a>

                    {% endif %}
            </div>

    </div>

    <div class="bar">


    <div class="selector-container">

            <form class="selector-filter" action="{% url 'фильтр' %}" method="get">

                <label>C:</label>
                <input type="date" name="startdate" max="2025-06-04">
                <br>
                <label>По:</label>
                <input type="date" name="stopdate" max="2025-06-04">
                <br>

                {% if role == 'Все отчеты' %}
                    <br>
                    <label for="group"></label>
                        <select id="group" name="group">

                            <option value={{ current_group }}>{{ current_group_name }}</option>

                            {% for group in group_list %}

                                <option value={{ group.id }}>{{ group }}</option>

                            {% endfor %}
                        </select>
                {% endif %}
                <br>
                <label for="author"></label>
                <select id="author" name="author">

                    <option value={{ author }}>{{ author_name }}</option>
                    {% for author in author_list %}

                        <option value={{ author.id }}>{{ author|truncatechars:18 }}</option>

                    {% endfor %}
                </select>


                <br>
                <input name="q" type="text" id="box" placeholder="В тексте...">
                <br>
                <input type="submit" value="Найти">
                <input type="button" value="Очистить" onClick='location.href="/"'>
            </form>

    </div>

</div>

    <div class="records">
            {% for recs in search_query %}
                <div class="record_layout" style="border: 2px solid green;">
                     <p style="">{{ recs.report_date }} {{ recs.author }}</p>
                     <p style="">{{recs.text|linebreaks }}</p>
                </div>
            {% endfor %}
    </div>

    <br>
    <hr style="height: 2px; width:85%;margin-left: 15%">
    <div class="records">
            {% for recs in all_records %}
                <div class="record_layout" style="border: 2px solid black;">
                     <p style="">{{ recs.report_date }} {{ recs.author }}</p>
                     <p style="">{{recs.text|linebreaks }}</p>
                </div>
            {% endfor %}
    </div>
{% endblock %}